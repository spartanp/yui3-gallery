YUI.add("gallery-notify",function(H){var B={INIT:"init",STARTED:"started"},C=H.Lang,F="boundingBox",D="contentBox",E="closeNode",A="closable",G="default";H.namespace("Notify").Message=H.Base.create("notify-message",H.Widget,[H.WidgetChild],{BOUNDING_TEMPLATE:"<li/>",CONTENT_TEMPLATE:"<em/>",CLOSE_TEMPLATE:'<span class="{class}">{label}</span>',_timer:null,initializer:function(I){this.get(F).setStyle("opacity",0);},renderUI:function(){var I=this.get(D),K=this.get(F),J;I.setContent(this.get("message"));if(this.get(A)){J=H.Node.create(H.substitute(this.CLOSE_TEMPLATE,{"class":this.getClassName("close"),"label":"X"}));this.set(E,J);K.append(J);}this.get("flag");},bindUI:function(){this._bindHover();if(this.get(A)){this._bindCloseClick();}},syncUI:function(){this.timer=new H.Timer({length:this.get("timeout"),repeatCount:1,callback:H.bind(this.close,this)});this.get(F).appear({afterFinish:H.bind(function(){this.timer.start();},this)});},close:function(){if(this.timer){this.timer.stop();}this.get(F).fade({afterFinish:H.bind(function(I){this.destroy();},this)});},_bindCloseClick:function(){this.get(E).on("click",H.bind(this.close,this));},_bindHover:function(){var I=this.get(F);I.on("mouseenter",H.bind(function(J){this.timer.pause();},this));I.on("mouseleave",H.bind(function(J){this.timer.resume();},this));}},{ATTRS:{closable:{value:true,validator:C.isBoolean},closeNode:{validator:function(I){return(I instanceof H.Node);}},message:{validator:C.isString},timeout:{value:8000},flag:{validator:C.isString,setter:function(I){this.get(F).replaceClass(this.getClassName("flag",this.get("flag")||G),this.getClassName("flag",I||G));return I;}}}});H.Notify=H.Base.create("notify",H.Widget,[H.WidgetParent,H.EventTarget],{CONTENT_TEMPLATE:"<ul/>",_childConfig:{},initializer:function(I){this.publish(B.INIT,{broadcast:1});this.publish(B.STARTED,{broadcast:1});this.fire(B.INIT);this._buildChildConfig();},syncUI:function(){this.fire(B.STARTED);},addMessage:function(K,I,J){I=I||G;this._buildChildConfig(K,I);if(J){return this.add(this._childConfig,J);}if(this.get("prepend")){return this.add(this._childConfig,0);}return this.add(this._childConfig);},addMessages:function(K){for(var L in K){if(C.isArray(K[L])){for(var J=0,I=K[L].length;J<I;J++){this.addMessage(K[L][J],L);}}}},_buildChildConfig:function(J,I){this._childConfig={closable:this.get(A),timeout:this.get("timeout"),message:J,flag:I};}},{ATTRS:{closable:{value:true,validator:C.isBoolean},defaultChildType:{value:H.Notify.Message},prepend:{value:false,validator:C.isBoolean},timeout:{value:8000}},EVENTS:B});},"gallery-2010.05.19-19-08",{requires:["substitute","widget","widget-parent","widget-child","gallery-timer","event-mouseenter","gallery-effects"]});