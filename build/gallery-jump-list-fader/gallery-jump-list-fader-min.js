YUI.add("gallery-jump-list-fader",function(B){var A;A=function(C){A.superclass.constructor.apply(this,arguments);};B.extend(A,B.Plugin.Base,{_anims:[],_animBase:{on:{start:function(C){C.currentTarget.get("node").setStyle("overflow","hidden");},end:function(C){C.currentTarget.get("node").setStyle("overflow","hidden");}}},_animHideTo:{height:0,opacity:0},_animShowTo:{opacity:1},initializer:function(C){this._animBase.easing=this.get("easing");this._animBase.duration=this.get("duration");this._hideShowAllLinks();B.one(this.get("container")).all(".back-to-top").set("text","Show All").on("click",function(D){D.preventDefault();this._showAll();},this);this.get("selection");B.delegate("click",function(G){var D=G.currentTarget.getAttribute("href"),F,E;if("#"!==D.substring(0,1)){return;}G.preventDefault();E=D.substring(1);F=B.one(this.get("container")).one("a[name="+E+"]")||B.one(this.get("container")).one("#"+E);if(F!==null){this.set("selection",F);}},this.get("host"),this.get("selector"),this);},_clearAnims:function(){B.Array.invoke(this._anims,"stop",false);this._anims=[];},_runAnims:function(){B.Array.invoke(this._anims,"run");},_addAnimToGroup:function(D,C){D.each(function(F){switch(C){case"hide":if(F.getStyle("opacity")==0){return;}var E=this._animBase;E.to=this._animHideTo;E.node=F;this._anims.push(new B.Anim(E));break;case"show":this._anims.push(this._getOpenAnim(F));break;}},this);},_getOpenAnim:function(E){var C=0,D={};D.height=E.getStyle("height");D.overflow=E.getStyle("overflow");D.opactiy=E.getStyle("opacity");D.visibility=E.getStyle("visibility");E.setStyles({"height":"auto","overflow":"auto","opacity":1,"visibility":"visible"});C=E.get("offsetHeight");E.setStyles(D);var F=this._animBase;F.to=this._animShowTo;F.to.height=C+"px";F.node=E;return new B.Anim(F);},_showAll:function(){this._clearAnims();this._addAnimToGroup(B.one(this.get("container")).all("."+this.get("groupClass")),"show");this._runAnims();this._hideShowAllLinks();this._setActiveSelector();},_hideAll:function(){this._clearAnims();this._addAnimToGroup(B.one(this.get("container")).all("."+this.get("groupClass")),"hide");this._runAnims();this._setActiveSelector();},_hideAllExcept:function(H){var D=this.get("groupClass"),C=B.one(this.get("container")).all("."+D),F,E,G;this._clearAnims();F=H;if(!F.hasClass(D)){F=F.ancestor("."+D);}E=C.refresh().indexOf(F);if(E>-1){C._nodes.splice(E,1);}this._addAnimToGroup(C,"hide");if(F.getStyle("opacity")!=1){this._anims.push(this._getOpenAnim(F));}this._runAnims();this._hideShowAllLinks(F);this._setActiveSelector("#"+(H.get("name")||H.get("id")));},_hideShowAllLinks:function(C){B.one(this.get("container")).all(".back-to-top").setStyle("visibility","hidden");if(C){C.all(".back-to-top").setStyle("visibility","visible");}},_setActiveSelector:function(C){this.get("host").all(".active").removeClass("active");if(C){this.get("host").all(this.get("selector")+"[href="+C+"]").addClass("active");}}},{NAME:"jump-list-fader",NS:"jumpListFader",ATTRS:{selector:{value:"a"},container:{value:"#jump-to-container"},groupClass:{value:"jump-group"},easing:{easing:B.Easing.easeOutStrong},duration:{value:0.28},selection:{value:"all",setter:function(C){if(C===null){this._hideAll();}else{if(C==="all"){this._showAll();}else{if(C instanceof B.Node){this._hideAllExcept(C);}}}return C;}}}});B.namespace("Plugin").JumpListFader=A;},"gallery-2010.06.30-19-54",{requires:["node","anim","event","plugin"]});