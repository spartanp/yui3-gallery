YUI.add("gallery-node-accordion",function(C){var Q=C.UA,L=C.ClassNameManager.getClassName,j={},P={fast:0.1,slow:0.6,normal:0.4},a="accordion",J="item",H="scrollHeight",O="scrollWidth",G="width",T="height",K="px",I=".",f="host",S="orientation",g="fade",U="multiple",d="persistent",B="speed",c="anim",i="items",Z=L(a),X=L(a,"hidden"),F=L(a,J),E=L(a,J,"active"),D=L(a,J,"sliding"),h=L(a,J,"hd"),b=L(a,J,"bd"),e=L(a,J,"ft"),R=L(a,J,"trigger"),N=I+F,A=I+b,M=">.",W=M+F,V=W+I+R+", "+W+M+h+I+R+", "+W+M+h+M+R+", "+W+M+e+I+R+", "+W+M+e+M+R;C.namespace("Plugin").NodeAccordion=C.Base.create("NodeAccordion",C.Plugin.Base,[],{_root:null,_eventHandler:null,initializer:function(Y){if((this._root=this.get(f))){this.get(i).each(function(k){if(k.hasClass(E)){this.expandItem(k);}else{this.collapseItem(k);}},this);this._eventHandler=this._root.delegate("click",function(k){this.toggleItem(k.currentTarget);k.target.blur();k.halt();},V,this);this._root.removeClass(X);}},destructor:function(){if(this._eventHandler){this._eventHandler.detach();}this._eventHandler=null;},_getItem:function(k){if(C.Lang.isNumber(k)){k=this.get(i).item(k);}var Y=function(l){return l.hasClass(F);};if(k&&!k.hasClass(F)){return k.ancestor(Y);}return k;},_animate:function(m,Y,k){var l=j[m];if((l)&&(l.get("running"))){l.stop();}if(C.Lang.isFunction(this.get(c))){Y.easing=this.get(c);}l=new C.Anim(Y);l.on("end",k,this);l.run();j[m]=l;return l;},_openItem:function(t){var n,Y,r,m,l,q=this.get(i),k=this.get(S),p={duration:this.get(B),to:{scroll:[]}},s;if(t&&q.size()&&!t.hasClass(E)&&(n=t.one(A))&&(Y=C.stamp(n))){if(!this.get(U)){s=this._root.one(M+E);}p.to[k]=(k==G?n.get(O):n.get(H));p.node=n;t.addClass(D);r=function(){t.removeClass(D);t.addClass(E);};if(!this.get(c)){m=n.get(k);if(C.Lang.isObject(s)){m=s.get(k);s.addClass(D);}for(l=1;l<=m;l++){if(C.Lang.isObject(s)){s.setStyle(k,(m-l)+K);}n.setStyle(k,l+K);}if(C.Lang.isObject(s)){s.removeClass(D);s.removeClass(E);}r();}else{p.to.scroll=[0,0];if(this.get(g)){p.to.opacity=1;}if(C.Lang.isObject(s)){this._closeItem(s);}this._animate(Y,p,r);}}},_closeItem:function(s){var n,Y,r,m,l,q=this.get(i),k=this.get(S),p={duration:this.get(B),to:{scroll:[]}};if(s&&q.size()&&(n=s.one(A))&&(Y=C.stamp(n))){p.to[k]=(((k==T)&&Q.ie&&(Q.ie<7))?1:0);p.node=n;s.addClass(D);r=function(){s.removeClass(D);s.removeClass(E);};if(!this.get(c)){m=n.get(k);for(l=m;l>=p.to[k].to;l--){n.setStyle(k,l+K);}r();}else{p.to.scroll=(k==G?[n.get(O),0]:[0,n.get(H)]);if(this.get(g)){p.to.opacity=0;}this._animate(Y,p,r);}}},expandAllItems:function(){if(this.get(U)){this.get(i).each(function(Y){this.expandItem(Y);},this);}return this;},collapseAllItems:function(){if(this.get(U)||!this.get(d)){this.get(i).each(function(Y){this.collapseItem(Y);},this);}return this;},expandItem:function(k){var Y=this._getItem(k);if(Y){this._openItem(Y);}return this;},collapseItem:function(k){var Y=this._getItem(k);if(Y&&Y.hasClass(E)&&(this.get(U)||!this.get(d))){this._closeItem(Y);}return this;},toggleItem:function(k){var Y=this._getItem(k);if(Y){((Y.hasClass(E)&&(this.get(U)||!this.get(d)))?this._closeItem(Y):this._openItem(Y));}return this;}},{NS:a,ATTRS:{activeItems:{readOnly:true,getter:function(Y){return this._root.all(M+E);}},items:{readOnly:true,getter:function(Y){return this._root.all(W);}},orientation:{value:T,writeOnce:true},fade:{value:false},anim:{value:false,validator:function(Y){return !C.Lang.isUndefined(C.Anim);}},multiple:{value:true},persistent:{value:false},speed:{value:0.4,validator:function(Y){return(C.Lang.isNumber(Y)||(C.Lang.isString(Y)&&P.hasOwnProperty(Y)));},setter:function(Y){return(P.hasOwnProperty(Y)?P[Y]:Y);}}}});},"gallery-2010.05.21-18-16",{optional:["anim"],requires:["node-base","node-style","plugin","base","node-event-delegate","classnamemanager"]});